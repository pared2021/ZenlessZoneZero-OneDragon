# TODO é …ç›®åˆ†æå ±å‘Š

## æ¦‚è¿°
æœ¬å ±å‘Šåˆ†æäº†é …ç›®ä¸­æ‰€æœ‰ TODO æ¨™è¨˜ï¼Œæ ¹æ“šå½±éŸ¿ç¨‹åº¦å’Œç·Šæ€¥ç¨‹åº¦çµ¦å‡ºä¿®å¾©å„ªå…ˆç´šå»ºè­°ã€‚

---

## ğŸ”´ P0 - ç·Šæ€¥å„ªå…ˆç´šï¼ˆç«‹å³ä¿®å¾©ï¼‰

### 1. æ¨¡æ¿åŒ¹é…åŠŸèƒ½ç¼ºå¤±
**æ–‡ä»¶**: `src/one_dragon/base/cv_process/steps/step_template_matching.py:30`

**å•é¡Œæè¿°**:
```30:31:src/one_dragon/base/cv_process/steps/step_template_matching.py
        # TODO: æ¨¡æ¿åŠ è½½åº”è¯¥æ”¯æŒå›¾åƒ
        template_image = None # logic.load_template_image(template_name)
```

**å½±éŸ¿åˆ†æ**:
- **åš´é‡æ€§**: âš ï¸ **åŠŸèƒ½å®Œå…¨ç„¡æ³•ä½¿ç”¨**
- ç•¶å‰ä»£ç¢¼ä¸­ `template_image` è¢«ç¡¬ç·¨ç¢¼ç‚º `None`ï¼Œå°è‡´æ•´å€‹æ¨¡æ¿åŒ¹é…åŠŸèƒ½ç„¡æ³•æ­£å¸¸å·¥ä½œ
- é€™æœƒå°è‡´æ‰€æœ‰ä¾è³´æ­¤åŠŸèƒ½çš„åœ–åƒåˆ†ææµç¨‹å¤±æ•—
- å½±éŸ¿ç¯„åœï¼šæ‰€æœ‰ä½¿ç”¨æ¨¡æ¿åŒ¹é…çš„ CV è™•ç†æµç¨‹

**ä¿®å¾©å»ºè­°**:
1. å¯¦ç¾ `ImageAnalysisLogic.load_template_image()` æ–¹æ³•
2. æˆ–è€…æª¢æŸ¥è©²æ–¹æ³•æ˜¯å¦å·²å­˜åœ¨ï¼Œç§»é™¤è¨»é‡‹ä¸¦å•Ÿç”¨è©²è¡Œ
3. æ·»åŠ éŒ¯èª¤è™•ç†å’Œæ—¥èªŒè¨˜éŒ„

**ä¿®å¾©é›£åº¦**: ä¸­ç­‰
**é ä¼°å·¥ä½œé‡**: 2-4 å°æ™‚

---

### 2. æŠ½çæ©Ÿèª¤åˆ¤å•é¡Œ
**æ–‡ä»¶**: `src/zzz_od/application/hollow_zero/lost_void/operation/lost_void_run_level.py:415`

**å•é¡Œæè¿°**:
```414:416:src/zzz_od/application/hollow_zero/lost_void/operation/lost_void_run_level.py
        elif screen_name == 'è¿·å¤±ä¹‹åœ°-æŠ½å¥–æœº':
            interact_type = 'é‚¦å¸ƒå•†åº—'  # TODO 1.6æ–°å¢çš„æŠ½å¥–æœºå›¾æ ‡ ä¼šè¢«è¯¯åˆ¤æˆå•†åº— ç­‰å¾…åç»­æ¨¡å‹æ›´æ–°
            interact_op = LostVoidLottery(self.ctx)
```

**å½±éŸ¿åˆ†æ**:
- **åš´é‡æ€§**: âš ï¸ **åŠŸèƒ½é‚è¼¯éŒ¯èª¤**
- æŠ½çæ©Ÿè¢«èª¤åˆ¤ç‚ºå•†åº—ï¼Œé›–ç„¶ä½¿ç”¨äº†æ­£ç¢ºçš„æ“ä½œé¡ï¼ˆ`LostVoidLottery`ï¼‰ï¼Œä½† `interact_type` è¢«éŒ¯èª¤è¨­ç½®ç‚º `'é‚¦å¸ƒå•†åº—'`
- é€™æœƒå°è‡´çµ±è¨ˆæ•¸æ“šéŒ¯èª¤ï¼Œå½±éŸ¿ç”¨æˆ¶é«”é©—å’Œæ—¥èªŒè¨˜éŒ„çš„æº–ç¢ºæ€§
- å½±éŸ¿ç¯„åœï¼šè¿·å¤±ä¹‹åœ°è‡ªå‹•åŒ–æµç¨‹ä¸­çš„æŠ½çæ©Ÿäº¤äº’

**ä¿®å¾©å»ºè­°**:
1. **è‡¨æ™‚æ–¹æ¡ˆ**: å°‡ `interact_type` æ”¹ç‚º `'æŠ½å¥–æœº'` æˆ– `'æŠ½çæ©Ÿ'`
2. **é•·æœŸæ–¹æ¡ˆ**: ç­‰å¾…æ¨¡å‹æ›´æ–°å¾Œï¼Œç¢ºä¿æŠ½çæ©Ÿèƒ½è¢«æ­£ç¢ºè­˜åˆ¥ç‚º `'è¿·å¤±ä¹‹åœ°-æŠ½å¥–æœº'` è€Œä¸æ˜¯ `'è¿·å¤±ä¹‹åœ°-é‚¦å¸ƒå•†åº—'`
3. æ·»åŠ æ›´æ˜ç¢ºçš„åˆ¤æ–·é‚è¼¯ï¼Œé¿å…èª¤åˆ¤

**ä¿®å¾©é›£åº¦**: ä½ï¼ˆè‡¨æ™‚æ–¹æ¡ˆï¼‰ / ä¸­ç­‰ï¼ˆé•·æœŸæ–¹æ¡ˆï¼‰
**é ä¼°å·¥ä½œé‡**: 30åˆ†é˜ï¼ˆè‡¨æ™‚æ–¹æ¡ˆï¼‰ / 4-8å°æ™‚ï¼ˆæ¨¡å‹æ›´æ–°ï¼‰

---

## ğŸŸ  P1 - é«˜å„ªå…ˆç´šï¼ˆè¿‘æœŸä¿®å¾©ï¼‰

### 3. OCR è¡Œè·åˆä½µåŠŸèƒ½æœªå¯¦ç¾
**æ–‡ä»¶**: `src/one_dragon/base/matcher/ocr/onnx_ocr_matcher.py:366`

**å•é¡Œæè¿°**:
```365:366:src/one_dragon/base/matcher/ocr/onnx_ocr_matcher.py
        if merge_line_distance != -1:
            pass  # TODO
```

**å½±éŸ¿åˆ†æ**:
- **åš´é‡æ€§**: âš ï¸ **åŠŸèƒ½ä¸å®Œæ•´**
- `merge_line_distance` åƒæ•¸åœ¨ `ocr()` æ–¹æ³•ä¸­è¢«æ¥æ”¶ä½†æœªå¯¦ç¾
- é›–ç„¶é»˜èªå€¼ç‚º `-1`ï¼ˆä¸åˆä½µï¼‰ï¼Œä½†ç•¶èª¿ç”¨è€…å‚³å…¥è©²åƒæ•¸æ™‚åŠŸèƒ½ä¸æœƒç”Ÿæ•ˆ
- å·²æœ‰åƒè€ƒå¯¦ç¾ï¼š`ocr_utils.py` ä¸­çš„ `merge_ocr_result_to_multiple_line()` å‡½æ•¸
- å½±éŸ¿ç¯„åœï¼šéœ€è¦ä½¿ç”¨è¡Œè·åˆä½µåŠŸèƒ½çš„ OCR å ´æ™¯ï¼ˆä¸»è¦ç‚ºè‹±æ–‡æ–‡æœ¬ï¼‰

**ä¿®å¾©å»ºè­°**:
1. åƒè€ƒ `ocr_utils.merge_ocr_result_to_multiple_line()` çš„å¯¦ç¾é‚è¼¯
2. å¯¦ç¾åŸºæ–¼ `merge_line_distance` çš„è¡Œè·åˆä½µåŠŸèƒ½
3. å°‡ `OcrMatchResult` åˆ—è¡¨æŒ‰ Y åæ¨™å’Œè¡Œè·é–¾å€¼é€²è¡Œåˆ†çµ„åˆä½µ

**ä¿®å¾©é›£åº¦**: ä¸­ç­‰
**é ä¼°å·¥ä½œé‡**: 3-6 å°æ™‚

**åƒè€ƒä»£ç¢¼**:
```44:58:src/one_dragon/base/matcher/ocr/ocr_utils.py
def merge_ocr_result_to_multiple_line(ocr_map, join_space: bool = True, merge_line_distance: float = 40) -> dict[str, MatchResultList]:
    """
    å°†OCRç»“æœåˆå¹¶æˆå¤šè¡Œ ç”¨äºè¿‡é•¿çš„æ–‡ä½“äº§ç”Ÿæ¢è¡Œ
    :param ocr_map: run_ocrçš„ç»“æœ
    :param join_space: è¿æ¥æ—¶æ˜¯å¦åŠ å…¥ç©ºæ ¼
    :param merge_line_distance: å¤šå°‘è¡Œè·å†…åˆå¹¶ç»“æœ
    :return:
    """
    lines = []
    for text, result_list in ocr_map.items():
        for result in result_list:
            in_line: int = -1
            for line_idx in range(len(lines)):
                for line_item in lines[line_idx]:
                    if abs(line_item.center.y - result.center.y) <= merge_line_distance:
                        in_line = line_idx
                        break
```

---

## ğŸŸ¡ P2 - ä¸­å„ªå…ˆç´šï¼ˆè¨ˆåŠƒä¿®å¾©ï¼‰

### 4. æ•¸æ“šçµæ§‹å®‰å…¨æ€§å•é¡Œ
**æ–‡ä»¶**: `src/zzz_od/hollow_zero/game_data/hollow_zero_event.py:10`

**å•é¡Œæè¿°**:
```7:11:src/zzz_od/hollow_zero/game_data/hollow_zero_event.py
    def __init__(self, entry_name: str, is_benefit: bool = True, need_step: int = 1,
                 is_base: bool = False, can_go: bool = True, is_tp: bool = False,
                 move_afterwards: bool = False, can_visited_times: int = 2):
        # TODO è¦å°†è¿™é‡Œæ”¹æˆä¸å¯æ”¹
        self.entry_id: str = entry_name[:4]
```

**å½±éŸ¿åˆ†æ**:
- **åš´é‡æ€§**: âš ï¸ **ä»£ç¢¼å¥å£¯æ€§**
- `HollowZeroEntry` é¡çš„å¯¦ä¾‹å±¬æ€§å¯ä»¥åœ¨å‰µå»ºå¾Œè¢«éš¨æ„ä¿®æ”¹
- é€™å¯èƒ½å°è‡´é‹è¡Œæ™‚æ•¸æ“šä¸ä¸€è‡´ï¼Œå½±éŸ¿éŠæˆ²é‚è¼¯çš„æ­£ç¢ºæ€§
- å½±éŸ¿ç¯„åœï¼šæ‰€æœ‰ä½¿ç”¨ `HollowZeroEntry` çš„å ´æ™¯

**ä¿®å¾©å»ºè­°**:
1. ä½¿ç”¨ `@dataclass(frozen=True)` æˆ– `@property` + `__setattr__` å¯¦ç¾ä¸å¯è®Šæ€§
2. æˆ–è€…ä½¿ç”¨ `__slots__` ä¸¦é‡å¯« `__setattr__` ä¾†ç¦æ­¢ä¿®æ”¹
3. ç¢ºä¿æ‰€æœ‰å±¬æ€§åœ¨åˆå§‹åŒ–å¾Œä¸å¯è®Šæ›´

**ä¿®å¾©é›£åº¦**: ä¸­ç­‰
**é ä¼°å·¥ä½œé‡**: 2-4 å°æ™‚

---

### 5. åŠŸèƒ½æ”¹é€²éœ€æ±‚
**æ–‡ä»¶**: `src/one_dragon_qt/widgets/shared_battle_dialog.py:39`

**å•é¡Œæè¿°**:
```36:42:src/one_dragon_qt/widgets/shared_battle_dialog.py
class SharedConfigDialog(FramelessDialog):
    def __init__(self, parent=None):
        """
        TODO æ”¹é€ æˆèµ„æºä¸‹è½½
        @param parent:
        """
        FramelessDialog.__init__(self, parent)
```

**å½±éŸ¿åˆ†æ**:
- **åš´é‡æ€§**: â„¹ï¸ **åŠŸèƒ½æ”¹é€²**
- ç•¶å‰åŠŸèƒ½å¯èƒ½å¯ç”¨ï¼Œä½†éœ€è¦æ”¹é€ æˆè³‡æºä¸‹è¼‰åŠŸèƒ½
- å½±éŸ¿ç¯„åœï¼šå…±äº«é…ç½®å°è©±æ¡†çš„ç”¨æˆ¶é«”é©—

**ä¿®å¾©å»ºè­°**:
1. æ˜ç¢ºç•¶å‰åŠŸèƒ½éœ€æ±‚
2. è¨­è¨ˆè³‡æºä¸‹è¼‰åŠŸèƒ½çš„ UI å’Œé‚è¼¯
3. å¯¦ç¾è³‡æºä¸‹è¼‰åŠŸèƒ½

**ä¿®å¾©é›£åº¦**: ä¸­ç­‰-é«˜
**é ä¼°å·¥ä½œé‡**: 8-16 å°æ™‚

---

## ğŸŸ¢ P3 - ä½å„ªå…ˆç´šï¼ˆå¯é¸ä¿®å¾©ï¼‰

### 6. æ—¥èªŒè¨˜éŒ„ç¼ºå¤±
**æ–‡ä»¶**: `src/one_dragon/base/push/curl_generator.py:133`

**å•é¡Œæè¿°**:
```131:134:src/one_dragon/base/push/curl_generator.py
        except (json.JSONDecodeError, TypeError) as e:
            # è§£æå¤±è´¥æ—¶å¿½ç•¥ headersï¼Œä½†å¯ä»¥è®°å½•è­¦å‘Š
            # TODO: å¯ä»¥è€ƒè™‘æ·»åŠ æ—¥å¿—è®°å½•
            pass
```

**å½±éŸ¿åˆ†æ**:
- **åš´é‡æ€§**: â„¹ï¸ **èª¿è©¦ä¾¿åˆ©æ€§**
- ç•¶å‰éŒ¯èª¤è¢«éœé»˜å¿½ç•¥ï¼Œæ²’æœ‰æ—¥èªŒè¨˜éŒ„
- å½±éŸ¿ç¯„åœï¼šèª¿è©¦å’Œå•é¡Œæ’æŸ¥çš„ä¾¿åˆ©æ€§

**ä¿®å¾©å»ºè­°**:
1. æ·»åŠ æ—¥èªŒè¨˜éŒ„ï¼Œè¨˜éŒ„è§£æå¤±æ•—çš„è­¦å‘Šä¿¡æ¯
2. è¨˜éŒ„å¤±æ•—çš„ headers æ•¸æ“šå’ŒéŒ¯èª¤é¡å‹

**ä¿®å¾©é›£åº¦**: ä½
**é ä¼°å·¥ä½œé‡**: 15-30 åˆ†é˜

---

### 7. ä»£ç¢¼æ¸…ç†ä»»å‹™
**æ–‡ä»¶**: `src/one_dragon/base/config/one_dragon_config.py:42`

**å•é¡Œæè¿°**:
```39:43:src/one_dragon/base/config/one_dragon_config.py
class OneDragonConfig(YamlConfig):

    def __init__(self):
        YamlConfig.__init__(self, 'one_dragon', backup_model_name='zzz_one_dragon')  # TODO 2025.12æ—¶å¯ä»¥åˆ æ‰ backup_model_name
        self.instance_list: List[OneDragonInstance] = []
```

**å½±éŸ¿åˆ†æ**:
- **åš´é‡æ€§**: â„¹ï¸ **ä»£ç¢¼æ¸…ç†**
- æœ‰æ˜ç¢ºçš„åˆªé™¤æ™‚é–“é»ï¼ˆ2025å¹´12æœˆï¼‰
- ä¸å½±éŸ¿ç•¶å‰åŠŸèƒ½ï¼Œåªæ˜¯ä»£ç¢¼æ¸…ç†ä»»å‹™

**ä¿®å¾©å»ºè­°**:
1. åœ¨ 2025å¹´12æœˆå¾Œåˆªé™¤ `backup_model_name` åƒæ•¸
2. ç¢ºä¿ä¸å†æœ‰ä»£ç¢¼ä¾è³´æ­¤åƒæ•¸

**ä¿®å¾©é›£åº¦**: ä½
**é ä¼°å·¥ä½œé‡**: 15-30 åˆ†é˜
**åŸ·è¡Œæ™‚é–“**: 2025å¹´12æœˆ

---

## ç¸½çµ

### å„ªå…ˆç´šåˆ†å¸ƒ
- **P0ï¼ˆç·Šæ€¥ï¼‰**: 2 å€‹
- **P1ï¼ˆé«˜ï¼‰**: 1 å€‹
- **P2ï¼ˆä¸­ï¼‰**: 2 å€‹
- **P3ï¼ˆä½ï¼‰**: 2 å€‹

### å»ºè­°ä¿®å¾©é †åº
1. **ç«‹å³ä¿®å¾©**ï¼ˆæœ¬é€±å…§ï¼‰:
   - âœ… æ¨¡æ¿åŒ¹é…åŠŸèƒ½ç¼ºå¤±ï¼ˆP0ï¼‰
   - âœ… æŠ½çæ©Ÿèª¤åˆ¤å•é¡Œï¼ˆP0ï¼Œè‡¨æ™‚æ–¹æ¡ˆï¼‰

2. **è¿‘æœŸä¿®å¾©**ï¼ˆæœ¬æœˆå…§ï¼‰:
   - âœ… OCR è¡Œè·åˆä½µåŠŸèƒ½ï¼ˆP1ï¼‰

3. **è¨ˆåŠƒä¿®å¾©**ï¼ˆä¸‹å€‹è¿­ä»£ï¼‰:
   - âœ… æ•¸æ“šçµæ§‹å®‰å…¨æ€§ï¼ˆP2ï¼‰
   - âœ… å…±äº«é…ç½®å°è©±æ¡†æ”¹é€ ï¼ˆP2ï¼‰

4. **å¯é¸ä¿®å¾©**ï¼ˆæœ‰ç©ºæ™‚ï¼‰:
   - âœ… æ—¥èªŒè¨˜éŒ„ç¼ºå¤±ï¼ˆP3ï¼‰
   - âœ… ä»£ç¢¼æ¸…ç†ä»»å‹™ï¼ˆP3ï¼Œ2025å¹´12æœˆåŸ·è¡Œï¼‰

### ç¸½é ä¼°å·¥ä½œé‡
- **ç·Šæ€¥ä¿®å¾©**: ç´„ 3-5 å°æ™‚
- **é«˜å„ªå…ˆç´š**: ç´„ 3-6 å°æ™‚
- **ä¸­å„ªå…ˆç´š**: ç´„ 10-20 å°æ™‚
- **ä½å„ªå…ˆç´š**: ç´„ 30-60 åˆ†é˜
- **ç¸½è¨ˆ**: ç´„ 16-32 å°æ™‚

---

## é™„éŒ„ï¼šå…¶ä»–ç™¼ç¾

### ä»£ç¢¼ä¸­çš„å ä½ç¬¦ï¼ˆé TODOï¼‰
ä»¥ä¸‹å…§å®¹é›–ç„¶åŒ…å« "xxx" ä½†å±¬æ–¼å ä½ç¬¦ï¼Œä¸å±¬æ–¼ TODOï¼š

1. `src/zzz_od/application/hollow_zero/lost_void/operation/lost_void_run_level.py:44`
   - `IT_BATTLE: ClassVar[str] = 'xxxx-æˆ˜æ–—'` - å¸¸é‡å€¼å®šç¾©

2. `src/zzz_od/application/hollow_zero/lost_void/lost_void_app.py:526, 548`
   - è¨»é‡‹ä¸­çš„ "xxxx/8000" - ç¤ºä¾‹èªªæ˜

3. `src/one_dragon/base/push/channel/work_weixin.py:30`
   - URL å ä½ç¬¦ç¤ºä¾‹

4. `src/one_dragon/base/push/channel/chronocat.py:46`
   - é…ç½®åƒæ•¸ç¤ºä¾‹

5. `src/zzz_od/application/hollow_zero/lost_void/context/lost_void_detector.py:13`
   - å¸¸é‡å€¼å®šç¾©

é€™äº›ä¸å±¬æ–¼éœ€è¦ä¿®å¾©çš„ TODOï¼Œå±¬æ–¼æ­£å¸¸çš„å ä½ç¬¦æˆ–ç¤ºä¾‹ä»£ç¢¼ã€‚

